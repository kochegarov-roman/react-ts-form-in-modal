(this["webpackJsonpform-in-modal"]=this["webpackJsonpform-in-modal"]||[]).push([[0],{13:function(e,t,a){},15:function(e,t,a){},17:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var c=a(1),i=a.n(c),n=a(4),r=a.n(n),l=(a(13),a(7)),o=a.n(l),d=a(3),s=a(8),m=a(2),u=a(5),j=(a(15),a(0)),f=function(e){var t=Object(c.useState)(void 0),a=Object(m.a)(t,2),i=a[0],n=a[1],r=Object(c.useState)(!1),l=Object(m.a)(r,2),o=l[0],d=l[1];return Object(j.jsxs)("div",{className:"accordion ".concat(e.className),children:[Object(j.jsxs)("div",{className:"title-accordion ".concat(o?"show-accordion":""),onClick:function(){return d(!o)},children:[(null===i||void 0===i?void 0:i.title)||"Select product type",Object(j.jsx)("svg",{style:o?{transform:"rotate(270deg)"}:{},className:o?"active":"",viewBox:"64 64 896 896",focusable:"false","data-icon":"right",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",children:Object(j.jsx)("path",{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"})})]}),Object(j.jsx)("div",{className:"accordion-body ".concat(o?"show-accordion-body":"hide-accordion-body"),children:o&&e.items&&e.items.map((function(t){return Object(j.jsx)("div",{className:"accordion-item",onClick:function(){return function(t){d(!o),n(t),e.handleChange&&e.handleChange(t)}(t)},children:t.title},t.title)}))})]})},b={formFieldValid:{firstName:!1,lastName:!1,email:!1,productType:!1},formValid:void 0,emailCheck:!0,readyToSend:!1,emptyField:["firstName","lastName","productType"]},h=function(e){var t=e.additionalFeatures,a=e.productsTypes,i=Object(c.useState)(0),n=Object(m.a)(i,2),r=n[0],l=n[1],o=Object(c.useState)(void 0),s=Object(m.a)(o,2),h=s[0],O=s[1],p=Object(c.useState)(new Set),v=Object(m.a)(p,2),x=v[0],N=v[1],y=Object(c.useState)({}),g=Object(m.a)(y,2),F=g[0],S=g[1],V=Object(c.useState)(b),C=Object(m.a)(V,2),w=C[0],T=C[1];Object(c.useEffect)((function(){var e=Array.from(x).reduce((function(e,a){return e+t[a].price}),0);l(e+((null===h||void 0===h?void 0:h.price)||0))}),[x,h]),Object(c.useEffect)((function(){S(Object(d.a)(Object(d.a)({},F),{},{productType:h})),T((function(e){return e.formFieldValid.productType=!0,e}))}),[h]),Object(c.useEffect)((function(){if(w.readyToSend){var a=Object(d.a)(Object(d.a)({},F),{},{totalPrice:r}),c=[];Array.from(x).forEach((function(e){return c.push(t[e])})),a.additionalFeatures=c,e.handleSendForm(a)}}),[w]);var k=function(e){var t=parseInt(e.target.value);e.target.checked?N((function(e){return e.add(t),new Set(e)})):N((function(e){return e.delete(t),new Set(e)}))},P=function(e){T((function(t){var a=Object(d.a)({},t);if(t.emptyField.forEach((function(t){a.formFieldValid[t]=!!e[t]})),t.emailCheck){var c,i=!!(null===(c=e.email)||void 0===c?void 0:c.match(/^([\w.%+-]+)@gmail.com$/i));a.formFieldValid.email=i}var n=Object.entries(a.formFieldValid).every((function(e){var t=Object(m.a)(e,2);t[0];return t[1]}));return a.formValid=n,a.readyToSend=n,a}))},E=function(e){S(Object(d.a)(Object(d.a)({},F),{},Object(u.a)({},e.target.name,e.target.value))),T((function(t){return t.formFieldValid[e.target.name]=!0,t}))};return Object(j.jsx)("div",{id:"order-form",children:Object(j.jsxs)("form",{action:"/",onSubmit:function(e){e.preventDefault(),P(F)},children:[Object(j.jsx)("div",{className:"title",children:"Title form"}),Object(j.jsxs)("div",{className:"form-field",children:[Object(j.jsx)("p",{className:void 0===w.formValid||w.formFieldValid.firstName?"d-none":"error-text",children:"Please fill in first name"}),Object(j.jsx)("input",{className:void 0===w.formValid||w.formFieldValid.firstName?"":"error-field",type:"text",id:"first-name",name:"firstName",placeholder:" ",onChange:E}),Object(j.jsx)("label",{htmlFor:"first-name",className:"required",children:"First name"})]}),Object(j.jsxs)("div",{className:"form-field",children:[Object(j.jsx)("p",{className:void 0===w.formValid||w.formFieldValid.lastName?"d-none":"error-text",children:"Please fill in last name"}),Object(j.jsx)("input",{className:void 0===w.formValid||w.formFieldValid.lastName?"":"error-field",type:"text",id:"last-name",name:"lastName",placeholder:" ",onChange:E}),Object(j.jsx)("label",{htmlFor:"last-name",className:"required",children:"Last Name"})]}),Object(j.jsxs)("div",{className:"form-field",children:[Object(j.jsx)("p",{className:void 0===w.formValid||w.formFieldValid.email?"d-none":"error-text",children:void 0===F.email?"Please fill in email":"Please enter a valid email address"}),Object(j.jsx)("input",{className:void 0===w.formValid||w.formFieldValid.email?"":"error-field",type:"text",id:"email",name:"email",placeholder:" ",onChange:E}),Object(j.jsx)("label",{htmlFor:"email",className:"required",children:"user@gmail.com"})]}),Object(j.jsxs)("div",{className:"field-around",children:[Object(j.jsx)("label",{htmlFor:"product-type",className:"required",children:"Product Type"}),Object(j.jsxs)("div",{className:"field-select",children:[Object(j.jsx)(f,{items:a,handleChange:O,className:void 0===w.formValid||w.formFieldValid.productType?"":"error-field"}),Object(j.jsx)("p",{className:void 0===w.formValid||w.formFieldValid.productType?"d-none":"error-text",children:"Please select product type"})]}),Object(j.jsx)("input",{type:"text",className:"d-none",name:"productType",onChange:E,value:(null===h||void 0===h?void 0:h.title)||""})]}),Object.entries(t).map((function(e,t){var a=Object(m.a)(e,2),c=a[0],i=a[1];return Object(j.jsxs)("div",{className:"field-around","data-name":"feature",children:[Object(j.jsx)("input",{type:"checkbox",name:i.title,value:c,className:"checkbox",id:"feature-".concat(c),onChange:k}),Object(j.jsx)("label",{htmlFor:"feature-".concat(c),className:"w100",children:i.title})]},t)})),Object(j.jsxs)("div",{className:"form-field",children:[Object(j.jsx)("textarea",{name:"comment",id:"comment",onChange:E,placeholder:" ",cols:40,rows:3}),Object(j.jsx)("label",{htmlFor:"email",className:"",children:"Type your comment"})]}),Object(j.jsxs)("div",{className:"field-around",children:[Object(j.jsx)("div",{children:"Total price"}),Object(j.jsxs)("div",{id:"total-price",children:["$",r]})]}),Object(j.jsx)("div",{style:{textAlign:"center"},children:Object(j.jsx)("button",{type:"submit",id:"submit-btn",children:"Send form"})})]})})},O=(a(17),function(e){var t=e.isShown,a=e.hide,n=e.modalContent,l=e.headerText,o=function(e){27===e.keyCode&&t&&a()};Object(c.useEffect)((function(){return document.body.style.overflow=t?"hidden":"unset",document.addEventListener("keydown",o,!1),function(){document.removeEventListener("keydown",o,!1)}}),[t]);var d=Object(j.jsx)(i.a.Fragment,{children:Object(j.jsx)("div",{className:"modal-back",children:Object(j.jsx)("div",{className:"modal-wrapper",children:Object(j.jsxs)("div",{className:"modal",children:[Object(j.jsxs)("div",{className:"modal-header",children:[Object(j.jsx)("div",{className:"modal-header-text",children:l}),Object(j.jsx)("div",{className:"modal-close-button",onClick:a,children:"x"})]}),Object(j.jsx)("div",{className:"modal-content",children:Object(j.jsx)("span",{className:"scroll_style",children:n})})]})})})});return t?r.a.createPortal(d,document.body):null}),p={0:{title:"Additinal feature for $100",price:100},1:{title:"Additinal feature for $200",price:200}},v=[{title:"Product $50",price:50},{title:"Product $100",price:100},{title:"Product $300",price:300}],x=function(){var e=function(){var e=Object(c.useState)(!1),t=Object(m.a)(e,2),a=t[0],i=t[1];return{isShown:a,toggle:function(){return i(!a)}}}(),t=e.isShown,a=e.toggle,i=Object(c.useState)(void 0),n=Object(m.a)(i,2),r=n[0],l=n[1],u=Object(c.useState)(!1),f=Object(m.a)(u,2),b=f[0],x=f[1],N=function(){var e=Object(s.a)(o.a.mark((function e(t){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://httpbin.org/post",x(!0),a(),e.next=5,fetch("https://httpbin.org/post",{method:"post",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(Object(d.a)({},t))}).then((function(e){return l(!1),e.json()})).catch((function(e){console.error(e),l(!0)})).finally((function(){x(!1)}));case 5:c=e.sent,console.log("result",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsxs)("div",{className:"form-in-modal",children:[Object(j.jsxs)("div",{className:"block-center",children:[void 0!==r&&Object(j.jsx)("div",{className:"result-send",children:r?"Sending error.":"Successfully sent."}),b&&Object(j.jsx)("div",{className:"result-send",children:"Sending..."}),Object(j.jsx)("button",{type:"button",id:"open-form",onClick:function(){a(),l(void 0)},children:"Fill in the form"})]}),Object(j.jsx)(O,{isShown:t,hide:a,modalContent:Object(j.jsx)(h,{additionalFeatures:p,productsTypes:v,handleSendForm:N}),headerText:""})]})};var N=function(){return Object(j.jsx)("div",{className:"",children:Object(j.jsx)(x,{})})},y=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,19)).then((function(t){var a=t.getCLS,c=t.getFID,i=t.getFCP,n=t.getLCP,r=t.getTTFB;a(e),c(e),i(e),n(e),r(e)}))};r.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(N,{})}),document.getElementById("root")),y()}},[[18,1,2]]]);
//# sourceMappingURL=main.a60c76c4.chunk.js.map